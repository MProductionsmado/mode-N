# Configuration for Minecraft 3D Asset Generator

# Data Settings
data:
  input_dir: "out"
  output_dir: "data"
  processed_dir: "data/processed"
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  random_seed: 42

# Model Architecture
model:
  # Size configurations
  sizes:
    normal:
      dims: [16, 16, 16]
      latent_dim: 128
    big:
      dims: [16, 32, 16]
      latent_dim: 192
    huge:
      dims: [24, 64, 24]
      latent_dim: 256
  
  # Text encoder
  text_encoder:
    model_name: "all-MiniLM-L6-v2"  # Sentence-BERT model
    embedding_dim: 384
    
  # 3D UNet for Diffusion
  encoder:
    channels: [64, 128, 256, 512]  # Reduced from [128, 256, 512, 1024] to fit in 24GB VRAM
    kernel_size: 4
    stride: 2
    padding: 1
    
  # Diffusion parameters (DDPM)
  diffusion:
    num_timesteps: 1000  # Number of diffusion steps
    noise_schedule: "cosine"  # 'linear' or 'cosine' (cosine is better)
    beta_start: 0.0001  # For linear schedule
    beta_end: 0.02  # For linear schedule
    time_embed_dim: 256  # Time embedding dimension
    num_res_blocks: 3  # INCREASED: More residual blocks for better long-range dependencies (was 2)
    attention_levels: [2, 3]  # RTX 4000 Ada (20GB): Level 1 removed to save VRAM (~3GB per GPU)
    dropout: 0.15  # INCREASED: More dropout for better generalization (was 0.1)
    sampling_steps: 100  # Generation quality: 50=fast, 100=good, 250=best (nur Generation, nicht Training!)

# Training Settings
training:
  batch_size: 3  # RTX 4000 Ada (20GB): 3 per GPU × 4 GPUs = effective 12 (sweet spot für 20GB)
  num_epochs: 400  # INCREASED: Even more epochs for fine details
  learning_rate: 0.00002  # FURTHER REDUCED: Much slower learning for structural consistency (was 0.00005)
  weight_decay: 0.00001
  conditioning_dropout: 0.1  # CFG: 10% training without text for diverse generation
  
  # Optimizer
  optimizer: "adam"
  scheduler: "cosine"
  warmup_epochs: 10  # INCREASED: Gradual warmup for stable slow learning
  
  # Checkpointing
  save_every_n_epochs: 50
  checkpoint_dir: "models"
  
  # Early stopping
  early_stopping:
    enabled: true
    patience: 75  # INCREASED: More patience for slower learning (was 50)
    monitor: "val/loss"
    
  # Logging
  log_dir: "logs"
  log_every_n_steps: 50
  
# Generation Settings
generation:
  num_samples: 1
  temperature: 1.0
  guidance_scale: 3.5  # CFG: 1.0=no guidance, 3.5=balanced (RTX 4000 optimiert), 7.5=strong
  
# Hardware
hardware:
  device: "cuda"  # cuda or cpu
  num_workers: 0  # RTX 4000 Ada: 0 für VRAM safety (war 8)
  precision: 16  # 16 for mixed precision, 32 for full precision
  num_gpus: 4  # Multi-GPU: 4x RTX 4000 Ada (20GB each)
  
# Block vocabulary (most common Minecraft blocks in nature assets)
# Note: mcschematic uses "_wood" not "_log" for tree trunks!
blocks:
  air: 0
  oak_leaves: 1
  spruce_leaves: 2
  birch_leaves: 3
  jungle_leaves: 4
  dark_oak_leaves: 5
  acacia_leaves: 6
  azalea_leaves: 7
  flowering_azalea_leaves: 8
  cherry_leaves: 9
  mangrove_leaves: 10
  oak_log: 11
  spruce_log: 12
  birch_log: 13
  jungle_log: 14
  dark_oak_log: 15
  acacia_log: 16
  tall_grass: 17
  short_grass: 18
  fern: 19
  grass_block: 20
  moss_block: 21
  moss_carpet: 22
  dandelion: 23
  poppy: 24
  blue_orchid: 25
  allium: 26
  azure_bluet: 27
  red_tulip: 28
  white_tulip: 29
  pink_tulip: 30
  oxeye_daisy: 31
  sunflower: 32
  peony: 33
  pink_petals: 34
  brown_mushroom: 35
  red_mushroom: 36
  brown_mushroom_block: 37
  stone: 38
  cobblestone: 39
  mossy_cobblestone: 40
  andesite: 41
  granite: 42
  diorite: 43
  dirt: 44
  coarse_dirt: 45
  snow: 46
  snow_block: 47
  ice: 48
  packed_ice: 49
  cactus: 50
  vine: 51
  lily_pad: 52
  dead_bush: 53
  oak_sapling: 54
  spruce_sapling: 55
  birch_sapling: 56
  jungle_sapling: 57
  dark_oak_sapling: 58
  acacia_sapling: 59
  azalea: 60
  flowering_azalea: 61
